<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Chaveamento</title>
<link rel="stylesheet" href="style.css">
<script defer src="script.js"></script>
</head>
<body>

<h1>Chaveamento do Torneio</h1>
<p>Selecione o vencedor de cada partida atÃ© chegar ao campeÃ£o.</p>

<div id="tabela"></div>

<button onclick="reiniciar()">Reiniciar Torneio</button>

</body>
</html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>InscriÃ§Ã£o do Torneio</title>
<link rel="stylesheet" href="style.css">
<script defer src="script.js"></script>
</head>
<body>

<h1>Torneio Mata-Mata</h1>
<p>Inscreva os times abaixo. Quando todos estiverem cadastrados, gere o chaveamento.</p>

<div id="cadastro">
    <input type="text" id="time" placeholder="Nome do Time">
    <button onclick="adicionarTime()">Cadastrar Time</button>
</div>

<h2>Times Inscritos:</h2>
<ul id="listaTimes"></ul>

<button id="btnChaveamento" onclick="gerarChaveamento()">Gerar Chaveamento</button>

</body>
</html>
let times = JSON.parse(localStorage.getItem("times")) || [];
let partidas = [];

function salvar(){
    localStorage.setItem("times", JSON.stringify(times));
    localStorage.setItem("partidas", JSON.stringify(partidas));
}

function adicionarTime(){
    let time = document.getElementById("time").value;
    if(time.trim()==="") return alert("Digite o nome do time!");
    
    times.push(time);
    salvar();
    listarTimes();
    document.getElementById("time").value="";
}

function listarTimes(){
    if(document.getElementById("listaTimes")){
        document.getElementById("listaTimes").innerHTML = times.map(t => `<li>${t}</li>`).join("");
    }
}
listarTimes();

function gerarChaveamento(){
    if(times.length < 2) return alert("Cadastre ao menos 2 times!");
    
    times = times.sort(()=> Math.random()-0.5);
    partidas = [];

    for(let i=0; i<times.length; i+=2){
        partidas.push({
            time1: times[i],
            time2: times[i+1] || "bye",
            vencedor: null
        });
    }
    salvar();
    window.location="chaveamento.html";
}

function mostrarPartidas(){
    let div = document.getElementById("tabela");
    if(!div) return;

    if(partidas.length==1 && partidas[0].vencedor){
        div.innerHTML = `<h2>ğŸ† CampeÃ£o: ${partidas[0].vencedor} ğŸ†</h2>`;
        return;
    }

    div.innerHTML = "<h2>Partidas</h2>";
    partidas.forEach((p,i)=>{
        div.innerHTML += `
        <div class="match">
            <strong>Jogo ${i+1}</strong><br>
            ${p.time1} vs ${p.time2}<br>
            <button onclick="vencer(${i},1)">${p.time1}</button>
            <button onclick="vencer(${i},2)">${p.time2}</button>
        </div>`;
    })
}
mostrarPartidas();

function vencer(i,op){
    partidas[i].vencedor = op==1? partidas[i].time1 : partidas[i].time2;
    proximaFase();
}

function proximaFase(){
    let vencedores = partidas.filter(p=>p.vencedor).map(p=>p.vencedor);
    if(vencedores.length == partidas.length){
        times = vencedores;
        partidas = [];
        for(let i=0;i<times.length;i+=2){
            partidas.push({
                time1: times[i],
                time2: times[i+1]||"bye",
                vencedor:null
            });
        }
        salvar();
        mostrarPartidas();
    }
}

function reiniciar(){
    if(confirm("Deseja apagar tudo?")){
        localStorage.clear();
        location="index.html";
    }
}
body{
  font-family: Arial, sans-serif;
  background:#f0f0f0;
  text-align:center;
  margin:0;
  padding:20px;
}

#cadastro{
  margin:20px auto;
}

input {
  padding:10px;
  width:200px;
  margin-right:10px;
}

button{
  padding:10px 20px;
  cursor:pointer;
  margin:10px;
}

ul{
  list-style:none;
  padding:0;
}

li{
  background:white;
  margin:5px auto;
  width:200px;
  padding:8px;
  border-radius:5px;
}

.match{
  background:white;
  margin:10px auto;
  width:300px;
  border-radius:8px;
  padding:10px;
}

.round{
  margin-top:30px;
}
